container_commands:
    01vardir:
        command: "mkdir var && chmod 777 var/"
    02composer:
        command: "php composer.phar install --no-dev --prefer-dist --optimize-autoloader --no-interaction"

option_settings:
    - namespace: aws:elasticbeanstalk:application:environment
      option_name: COMPOSER_HOME
      value: /root
    - namespace: aws:elasticbeanstalk:container:php:phpini
      option_name: document_root
      value: /public
    - namespace: aws:elasticbeanstalk:container:php:phpini
      option_name: memory_limit
      value: 1G
    - namespace: aws:elasticbeanstalk:container:php:phpini
      option_name: display_errors
      value: "On"
    - namespace: aws:elasticbeanstalk:container:php:phpini
      option_name: max_execution_time
      value: 60
    - namespace: aws:elasticbeanstalk:container:php:phpini
      option_name: zlib.output_compression
      value: "On"
    - namespace: aws:elasticbeanstalk:application:environment
      option_name: APP_ENV
      value: prod